#!/usr/bin/env node

/**
 * Panther Server Manager bootstrap
 * TODO:
 * - Check config/servers.json to ensure that each entry
 *   has atleast the minumum settings
 * - Check config/server.json to ensure there are no duplicate
 *   aliases for server-ids
 **/

//load required modules
var Cli = require('../lib/cli').Cli,
Api = require('../lib/api').Api,
Psm = require('../lib/psm').Psm,
Logger = require('../lib/logger').Logger,
config = require('../config/config.json'),
servers = require('../config/servers.json');

//initialize PSM module and
//the CLI and API modules
var logger = new Logger(),
psm = new Psm(servers, logger),
cli = new Cli(psm, logger);

cli.start();

if(config.api.enabled) {
    var api = new Api(psm, logger);
    api.start();
}